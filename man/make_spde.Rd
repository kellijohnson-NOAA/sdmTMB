% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mesh.R
\name{make_spde}
\alias{make_spde}
\alias{plot_spde}
\title{Construct an SPDE mesh}
\usage{
make_spde(
  data,
  xy_cols,
  type = c("cutoff", "cutoff-search", "kmeans"),
  cutoff,
  n_knots,
  seed = 42,
  refine = list(min.angle = 21, max.edge = Inf, max.n.strict = -1, max.n = 1000),
  mesh = NULL
)

plot_spde(object)
}
\arguments{
\item{data}{A data frame.}

\item{xy_cols}{A character vector of x and y column names contained in
\code{data}.}

\item{type}{Method to create the mesh. Also see \code{mesh} argument to supply
your own mesh.}

\item{cutoff}{An optional cutoff if type is \code{"cutoff"}. "The minimum allowed
distance between points in the mesh". See \code{\link[INLA:inla.mesh.create]{INLA::inla.mesh.create()}}.
Smaller values create meshes with more knots. Points further apart than this
value will receive a separate vertex in the mesh before any mesh refinement.}

\item{n_knots}{The number of desired knots if \code{type} is not \code{"cutoff"}.}

\item{seed}{Random seed. Affects \code{\link[stats:kmeans]{stats::kmeans()}} determination of knot
locations if \code{type = "kmeans"}.}

\item{refine}{Logical or list to pass to \code{\link[INLA:inla.mesh.create]{INLA::inla.mesh.create()}}.}

\item{mesh}{An optional mesh created via INLA instead of using the above
convenience options.}

\item{object}{Output from \code{\link[=make_spde]{make_spde()}}.}
}
\value{
A list of class sdmTMBmesh.
}
\description{
Construct an SPDE mesh
}
\examples{
sp <- make_spde(pcod, c("X", "Y"), n_knots = 50, type = "cutoff-search")
plot(sp)

sp <- make_spde(pcod, c("X", "Y"), n_knots = 50, type = "kmeans")
plot(sp)

sp <- make_spde(pcod, c("X", "Y"), cutoff = 30, type = "cutoff")
plot(sp)

sp <- make_spde(pcod, c("X", "Y"), cutoff = 5, type = "cutoff")
plot(sp)

\donttest{
# Defining a mesh directly with INLA:
loc_xy <- cbind(pcod$X, pcod$Y)
bnd <- INLA::inla.nonconvex.hull(loc_xy, convex = -0.05)
mesh <- INLA::inla.mesh.2d(
  boundary = bnd,
  max.edge = c(20, 50),
  offset = -0.05,
  cutoff = c(2, 5),
  min.angle = 10
)
sp2 <- make_spde(pcod, c("X", "Y"), mesh = mesh)
plot(sp2)
}

}
